<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Abei Foodphedia co. ‚Äî Company Profile</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />

    <!-- Tailwind: enable dark mode via class -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
      };
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>

  <body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200">
    <div id="root"></div>

    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script type="text/babel">
      const products = [
        {
          id: 1,
          type: "Catering",
          name: "Catering Nasi Box Premium",
          price: "Rp 45.000 / box",
          img: "nasi-box-premium.jpg?auto=format&fit=crop&w=900&q=60",
          desc: "Menu komplet untuk acara kantor & keluarga. Rasa mantap, porsi pas, higienis.",
        },
        {
          id: 2,
          type: "Catering",
          name: "Paket Prasmanan",
          price: "Rp 75.000 / pax",
          img: "https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?auto=format&fit=crop&w=900&q=60",
          desc: "Pilihan menu fleksibel, cocok untuk wedding, gathering, dan meeting.",
        },
        {
          id: 3,
          type: "Catering",
          name: "Paket Snack Meeting",
          price: "Rp 18.000 / pax",
          img: "https://images.unsplash.com/photo-1499028344343-cd173ffc68a9?auto=format&fit=crop&w=900&q=60",
          desc: "4 macam snack lezat + minuman, siap antar tepat waktu.",
        },
        {
          id: 4,
          type: "Makanan Ringan",
          name: "Kue Kering Premium",
          price: "Rp 65.000 / jar",
          img: "cheese_stick.jpg?auto=format&fit=crop&w=900&q=60",
          desc: "Renyah, wangi, dan dibuat tanpa bahan pengawet.",
        },
        {
          id: 5,
          type: "Makanan Ringan",
          name: "Brownies Coklat Lumer",
          price: "Rp 32.000 / loyang",
          img: "coklat_lumer.jpg?auto=format&fit=crop&w=900&q=60",
          desc: "Chocolate lovers wajib coba ‚Äî lembut, legit, dan bikin nagih!",
        },
      ];

      const testimonials = [
        { name: "Bambang", text: "Cateringnya enak dan rapi. Delivery tepat waktu!", stars: 5 },
        { name: "Markonah 19", text: "Snack meeting selalu habis ‚Äî karyawan suka semua.", stars: 4 },
        { name: "Herman", text: "Pelayanan ramah, harga bersahabat, recomended!", stars: 5 },
      ];

      function App() {
        const [list, setList] = React.useState(testimonials);

        function addTestimonial(e) {
          e.preventDefault();

          const newT = {
            name: document.getElementById("tName").value,
            text: document.getElementById("tText").value,
            stars: Number(document.getElementById("tStars").value),
          };

          const updated = [newT, ...list];
          setList(updated);

          localStorage.setItem("abei_testimonials", JSON.stringify(updated));

          e.target.reset();
        }

        React.useEffect(() => {
          const saved = localStorage.getItem("abei_testimonials");
          if (saved) setList(JSON.parse(saved));
        }, []);

        const [current, setCurrent] = React.useState(0);
        const [popup, setPopup] = React.useState(null);
        const trackRef = React.useRef(null);
        const pos = React.useRef({ x: 0, start: 0 });

        const start = (e) => (pos.current.start = e.touches[0].clientX);
        const move = (e) => (pos.current.x = e.touches[0].clientX);
        const end = () => {
          if (pos.current.x - pos.current.start > 60) prev();
          if (pos.current.start - pos.current.x > 60) next();
        };

        const prev = () => setCurrent((c) => (c === 0 ? products.length - 1 : c - 1));
        const next = () => setCurrent((c) => (c === products.length - 1 ? 0 : c + 1));

        React.useEffect(() => {
          if (trackRef.current) {
            trackRef.current.style.transform = `translateX(-${current * 100}%)`;
          }
        }, [current]);

        React.useEffect(() => {
          const obs = new IntersectionObserver(
            (entries) => {
              entries.forEach((e) => {
                if (e.isIntersecting) {
                  e.target.classList.add("show");
                }
              });
            },
            { threshold: 0.2 }
          );
          document.querySelectorAll(".reveal").forEach((el) => obs.observe(el));
        }, []);

        return (
          <div>
            {/* HERO */}
            <section className="hero-section flex items-center dark:bg-gray-950 relative">
              <button id="themeToggle" className="absolute top-4 right-4 bg-white/80 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full px-3 py-2 shadow hover:shadow-lg transition">
                üåô / ‚òÄÔ∏è
              </button>

              <div className="container mx-auto px-6 text-white reveal">
                <h1 className="hero-title">Abei Foodphedia co.</h1>
                <p className="hero-tagline">melayani dengan senang hati</p>
                <p className="opacity-90 max-w-2xl mb-6">Solusi katering & makanan ringan untuk acara, kantor, dan keluarga ‚Äî higienis, enak, dan harga bersahabat.</p>
                <div className="flex gap-3 flex-wrap">
                  <a href="#produk" className="btn btn-light text-orange-600 fw-bold animate-bounce-soft">
                    Lihat Produk
                  </a>
                  <a href="#kontak" className="btn btn-outline-light">
                    Hubungi Kami
                  </a>
                </div>
              </div>
            </section>

            {/* ABOUT */}
            <section className="py-14 container mx-auto px-6 reveal bg-white dark:bg-gray-900">
              <div className="grid md:grid-cols-2 gap-8 items-center">
                <div>
                  <h2 className="title-orange mb-3">Tentang Kami</h2>
                  <p className="mb-4">Kami menghadirkan makanan lezat, sehat, dan terpercaya untuk setiap momen Anda.</p>
                  <ul className="space-y-2">
                    <li>‚úî Visi: Mitra katering terbaik</li>
                    <li>‚úî Misi: Layanan cepat & ramah</li>
                    <li>‚úî Komitmen: Kebersihan & rasa utama</li>
                  </ul>
                </div>
                <div className="grid grid-cols-3 gap-4 text-center">
                  <div className="stat-card dark:bg-gray-800">
                    <h3 className="stat-value">120+</h3>
                    <p>Acara</p>
                  </div>
                  <div className="stat-card dark:bg-gray-800">
                    <h3 className="stat-value">3200+</h3>
                    <p>Pelanggan</p>
                  </div>
                  <div className="stat-card dark:bg-gray-800">
                    <h3 className="stat-value">5‚≠ê</h3>
                    <p>Rating</p>
                  </div>
                </div>
              </div>
            </section>

            {/* PRODUCTS */}
            <section id="produk" className="py-16 bg-gray-50 dark:bg-gray-900 reveal">
              <div className="container mx-auto px-6">
                <h2 className="title-orange mb-6">Katalog Produk</h2>

                <div className="relative overflow-hidden rounded-3xl shadow bg-white dark:bg-gray-800 product-card">
                  <div ref={trackRef} className="carousel-track" onTouchStart={start} onTouchMove={move} onTouchEnd={end}>
                    {products.map((p) => (
                      <div key={p.id} className="min-w-full p-6 grid md:grid-cols-2 gap-6 items-center">
                        <img src={p.img} className="rounded-3xl cursor-pointer img-zoom" onClick={() => setPopup(p)} />
                        <div>
                          <span className="badge bg-orange-500 mb-2">{p.type}</span>
                          <h3 className="text-2xl font-bold mb-1">{p.name}</h3>
                          <p className="text-red-500 font-semibold mb-2">{p.price}</p>
                          <p>{p.desc}</p>
                        </div>
                      </div>
                    ))}
                  </div>

                  <button onClick={prev} className="btn btn-light nav-left shadow">
                    ‚Äπ
                  </button>
                  <button onClick={next} className="btn btn-light nav-right shadow">
                    ‚Ä∫
                  </button>

                  <div className="flex justify-center gap-2 py-3">
                    {products.map((_, i) => (
                      <span key={i} onClick={() => setCurrent(i)} className={`dot ${i === current ? "dot-active" : ""}`} />
                    ))}
                  </div>
                </div>

                <div className="flex gap-3 mt-4 overflow-x-auto pb-2">
                  {products.map((p, i) => (
                    <img key={p.id} src={p.img} onClick={() => setCurrent(i)} className={`h-20 rounded-xl cursor-pointer thumb ${current === i ? "thumb-active" : ""}`} />
                  ))}
                </div>
              </div>
            </section>

            {/* POPUP */}
            {popup && (
              <div className="popup-backdrop">
                <div className="popup-card dark:bg-gray-800 dark:text-gray-100">
                  <button className="btn btn-sm btn-light close-btn" onClick={() => setPopup(null)}>
                    ‚úï
                  </button>

                  <img src={popup.img} className="rounded-2xl mb-4" />
                  <h3 className="text-2xl font-bold">{popup.name}</h3>
                  <p className="text-red-500 font-semibold">{popup.price}</p>
                  <p className="mt-2">{popup.desc}</p>

                  <a target="_blank" rel="noreferrer" href={`https://wa.me/6280000000000?text=Halo%2C+saya+ingin+memesan:+${encodeURIComponent(popup.name)}`} className="btn btn-success mt-4">
                    Pesan via WhatsApp
                  </a>
                </div>
              </div>
            )}

            {/* TESTIMONI */}
            <section className="py-16 container mx-auto px-6 reveal bg-white dark:bg-gray-800">
              <h2 className="title-orange mb-6">Testimoni Pelanggan</h2>
              <form onSubmit={(e) => addTestimonial(e)} className="mb-8 p-5 rounded-2xl bg-white dark:bg-gray-800 shadow">
                <h3 className="text-lg font-bold mb-3">Tambahkan Testimoni</h3>

                <input id="tName" className="form-control mb-3" placeholder="Nama" required />

                <textarea id="tText" className="form-control mb-3" rows="3" placeholder="Komentar" required></textarea>

                <select id="tStars" className="form-control mb-3" required>
                  <option value="5">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è (Sangat Puas)</option>
                  <option value="4">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è (Bagus)</option>
                  <option value="3">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è (Cukup)</option>
                </select>

                <button className="btn btn-success">Kirim</button>
              </form>

              <div className="grid md:grid-cols-3 gap-6">
                {list.map((t, i) => (
                  <div key={i} className="shadow rounded-2xl p-5 testimonial-card dark:bg-gray-800">
                    <p className="mb-3 italic">‚Äú{t.text}‚Äù</p>
                    <div className="text-orange-500 mb-2">
                      {"‚òÖ".repeat(t.stars)}
                      {"‚òÜ".repeat(5 - t.stars)}
                    </div>
                    <strong>{t.name}</strong>
                  </div>
                ))}
              </div>
            </section>

            {/* COUNTER */}
            <section className="py-12 bg-linear-to-r from-orange-100 via-white to-red-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800">
              <div className="max-w-5xl mx-auto text-center">
                <div className="inline-flex items-center gap-4 px-8 py-5 rounded-2xl shadow-xl bg-white/90 dark:bg-gray-800/90 border border-orange-200 dark:border-gray-600 backdrop-blur">
                  <div className="relative p-4 rounded-full bg-orange-500 text-white shadow-lg animate-bounce">
                    <i className="bi bi-people-fill text-3xl"></i>
                    <span className="absolute inset-0 rounded-full bg-orange-400 opacity-40 animate-ping"></span>
                  </div>

                  <div className="text-left">
                    <p className="text-sm uppercase tracking-wide text-gray-500 dark:text-gray-300">Total Pengunjung</p>

                    <div className="flex items-end gap-2">
                      <span id="visitorCounter" className="text-4xl font-extrabold text-orange-600 counter-bounce">
                        0
                      </span>
                      <span className="text-sm text-gray-500 dark:text-gray-300">real-time</span>
                    </div>

                    <div className="mt-2 w-40 h-1 bg-orange-200 rounded-full overflow-hidden">
                      <div className="h-1 bg-orange-500 animate-[pulse_2.5s_ease-in-out_infinite]"></div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* CONTACT */}
            <section id="kontak" className="py-16 bg-gray-50 dark:bg-gray-900 reveal">
              <div className="container mx-auto px-6">
                <h2 className="title-orange mb-6">Kontak & Lokasi</h2>

                <div className="grid md:grid-cols-2 gap-8">
                  <div>
                    <p className="mb-2">üìû 0812-0000-0000</p>
                    <p className="mb-2">‚úâ abei.foodphedia@mail.com</p>
                    <p className="mb-4">üìç Jakarta, Indonesia</p>
                    <p>Kami siap membantu kebutuhan katering Anda ‚Äî silakan hubungi kapan saja!</p>
                  </div>
                  <div className="rounded-3xl overflow-hidden shadow">
                    <iframe
                      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.778794880979!2d106.827153!3d-6.17148!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f3b8ad0dc1c7%3A0x4d0c1e7f6b18c9a!2sMonas!5e0!3m2!1sid!2sid!4v1700000000000!5m2!1sid!2sid"
                      width="100%"
                      height="320"
                      loading="lazy"
                      style={{ border: 0 }}
                      allowFullScreen=""
                      referrerPolicy="no-referrer-when-downgrade"
                    ></iframe>
                  </div>
                </div>
              </div>
            </section>

            <footer className="py-6 text-center text-sm bg-gray-100 dark:bg-gray-800">¬© {new Date().getFullYear()} Abei Foodphedia co. ‚Äî melayani dengan senang hati</footer>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
      lucide.createIcons();
    </script>

    <!-- THEME TOGGLE -->
    <script>
      function attachThemeToggle() {
        const html = document.documentElement;
        const toggle = document.getElementById("themeToggle");

        if (!toggle) {
          setTimeout(attachThemeToggle, 150);
          return;
        }

        // set awal (default: light)
        if (localStorage.theme === "dark") {
          html.classList.add("dark");
        } else {
          html.classList.remove("dark");
        }

        toggle.addEventListener("click", () => {
          html.classList.toggle("dark");
          localStorage.theme = html.classList.contains("dark") ? "dark" : "light";
        });
      }

      attachThemeToggle();
    </script>

    <!-- REAL-TIME COUNTER (Vercel-ready) -->
    <script>
      async function loadCounter() {
        try {
          const res = await fetch("/api/visitors");
          const data = await res.json();

          const el = document.getElementById("visitorCounter");
          if (el) el.innerText = data.value;
        } catch (e) {
          console.warn("counter error:", e);
        }
      }

      loadCounter();
      setInterval(loadCounter, 5000);
    </script>
  </body>
</html>
